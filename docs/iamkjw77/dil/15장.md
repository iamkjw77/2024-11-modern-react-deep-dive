## 15. 마치며

### 리액트 프로젝트를 시작할 때 고려해야 할 사항

웹사이트를 개발하기 위해 리액트를 사용하기로 마음먹었다면, 혹은 기존 리액트 애플리케이션을 유지보수하기로 결정했다면 참고해야 할 내용을 다룬다.

### 유지보수 중인 서비스라면 리액트 버전을 최소 16.8.6에서 최대 17.0.2로 올려두자

리액트 16.8은 리액트 생태계의 판도를 바꿨다고 해도 과언이 아닐 만큼 중요한 업데이트가 이뤄졌다. 훅이 소개됐고, 훅 덕분에 함수 컴포넌트의 개념이 정립됐다. 대부분의 리액트 애플리케이션 생태계, 그리고 라이브러리가 모두 훅을 지원한다는 가정하에 작성되어 있다고 해도 과언이 아니다. 따라서 향후 원활한 지원을 위해 버전을 16.8.6 이상으로 맞추는 것이 좋다. 또한 17 버전은 리액트 팀에서 공언한 대로 새로운 기능 출시 및 호환성이 깨지는 변경 사항을 최소한으로 맞춘 업데이트이므로 가능하다면 17 버전으로 가는 것도 좋다.

또한 리액트 팀에서는 클래스 컴포넌트를 사라지게 할 계획은 없다고 밝혔다. 클래스 컴포넌트애서 함수 컴포넌트로 넘어가려면 함수형으로 사고의 전환이 필요하고 함수 컴포넌트를 모두 능숙하게 다룰 줄 알아야 한다. 가까운 미래에 클래스 컴포넌트가 사라지지 않을 것이므로 굳이 클래스 컴포넌트를 함수 컴포넌트로 서둘러 전환하지 않아도 된다.

### 인터넷 익스플로러 11 지원을 목표한다면 각별히 더 주의를 기한다

일반적인 경우라면 크게 상관없지만 인터넷 익스플로러 11 등 레거시 브라우저를 지원해야 하는 경우에는 npm install에 앞서서 반드시 주의를 기울여야 한다.

다음은 인터넷 익스플로러 11을 지원하지 않는 대표적인 라이브러리이다.

- 리액트: 리액트는 18 버전부터 인터넷 익스플로러 11을 지원하지 않기로 했다.
- Next.js: Next.js는 13 버전부터 공식적으로 인터넷 익스플로러 11을 지원하지 않기로 했다.
- query-string: 주소의 쿼리 문자열을 다루는 대표적인 라이브러리인 query-string도 6.x 버전부터 인터넷 익스플로러 11을 지원하지 않는다.

### 서버 사이드 렌더링 애플리케이션을 우선적으로 고려한다

기본 HTML에 온전히 자바스크립트로 렌더링과 라우팅을 수행하는 SPA는 대부분의 경우 라이트하우스와 WebPageTest, 크롬 개발자 도구에서 좋은 결과를 얻기 어렵다. 하드웨어의 눈부신 발전으로 모바일 기기에서도 예전 PC만큼의 성능을 뽑아낼 수 있다고는 하지만 모바일 기기의 성능은 사용자별로 천차만별이기 때문에 자바스크립트 코드의 실행 속도에 의존적일수록 평균적인 사용자 경험을 제공하기란 어렵다.

관리자와 같이 제한적인 사용자에게 빠르게 웹페이지를 제공해야 하는 경우, 혹은 이벤트 페이지와 같이 콘텐츠와 인터렉션이 매우 제한적인 소규모 웹페이지를 만드는 경우, 혹은 서버를 준비해야 할 상황이 여의치 않은 경우에만 SPA를 만드는 것을 추천한다. 많은 사용자를 감당해야 하고, 혹은 그럴 계획이 있다면, 그리고 서버를 준비할 수 있는 충분한 여유가 된다면 시작부터 서버 사이드 렌더링을 고려하는 것이 좋다.

### 상태 관리 라이브러리는 꼭 필요할 때만 사용한다

리액트 애플리케이션 개발을 시작하기 전에, 그리고 상태 관리 라이브러리를 설치하기 전에, 반드시 상태 관리 라이브러리가 필요한지 꼭 한번 생각해보자. 만약 아직 상태 관리 라이브러리에 대해 잘 모르겠다면 스스로 상태 관리 라이브러리를 한 단계씩 만들어보는 것도 좋다. Jotai, Zustand 같은 라이브러리의 내부 구조는 그다지 복잡하지 않으며, 대부분의 상태 관리 라이브러리가 비슷한 원리로 작동한다.

### 리액트 의존성 라이브러리 설치를 조심한다

어떠한 기능 구현을 위해 라이브러리를 설치할 때, 특히 리액트에 의존적인 라이브러리를 설치하려고 하는 경우가 있을 것이다. 이런 라이브러리의 대부분은 `react-**` 같은 이름을 가지고 있으며, 대부분 다음과 같이 리액트에 대한 의존성을 가지고 있다.

```json
{
  "peerDependencies": {
    "react": "^16.8.6 || ^17.0.0",
    "react-dom": "^16.8.6 || ^17.0.0"
  }
}
```

이때 반드시 이 peerDependencies가 설치하고자 하는 프로젝트의 리액트 버전과 맞는지 확인해야 한다. 이 버전이 맞지 않다면 정상적인 방법으로 설치가 불가능하고, 설령 억지로 설치한다 하더라도 향후 문제를 일으킬 가능성이 크다.

### 언젠가 사라질 수도 있는 리액트

리액트 개발자가 아닌 웹 개발자로서 바라보는 리액트의 불편함과, 더 오랜 기간 웹 개발자로서 자리매김하는 데 도움이 될 수 있는 내용을 살펴본다.

### 리액트는 그래서 정말 완벽한 라이브러리인가?

리액트는 가장 널리 쓰이는 프론트엔드 라이브러리는 맞지만 그렇다고 가장 완벽한 라이브러리라고 단정 짓기는 어렵다. 여전히 리액트를 반대하는 사람들은 많으며, 리액트의 대안을 주장하는 사람들도 있다. 리액트를 반대하는 사람들의 의견은 다음과 같다.

**클래스 컴포넌트에서 함수 컴포넌트로 넘어오면서 느껴지는 혼란**

클래스 컴포넌트와 함수 컴포넌트는 완전히 다른 개념이고, 또한 내부적으로 작동하는 방식도 다르기 때문에 ES6의 클래스에 대한 이해가 부족하다면 이를 완전히 이해하기 어렵다.

이에 반해 Svelte와 Vue의 문서는 깔끔하고 잘 정리되어 있는 편이다. 무엇보다 함수 컴포넌트와 클래스 컴포넌트와 같은 큰 패러다임의 차이도 없기 때문에 초보자가 훨씬 이해하기 편하다.

**너무 방대한 자유가 주는 혼란**

CSS, 데이터를 fetch하는 방법, 상태 관리까지 다양한 것들이 파편화되어 있다. Angular나 Vue처럼 하나를 배워두면 서로 다른 곳에서도 빠르게 쓸 수 있는 구조가 아니라 리액트 외에 다른 것들은 새롭게 배워야 한다. 이러한 다양성과 파편화는 새로운 것을 익히는 것을 즐기는 개발자들에게는 구미를 당기는 요소가 될 수 있지만, 자칫 파편화된 리액트 기술 스택은 새로운 리액트 개발자에게 장애물이 될 수 있다.

이 외에도 비직관적인 JSX, 너무 급진적으로 변화하는 API 등 리액트를 선호하지 않는 진영은 리액트를 사용하는 진영에 비해 많지 않지만 그들의 주장에도 합리적인 이유와 논리가 있으며 이를 개선한 리액트 외에 대안도 존재한다.

따라서 리액트를 배우고 있거나 실무에서 리액트를 사용하고 있거나, 혹은 리액트를 너무 사랑한다 하더라도 리액트만이 진리이며, 리액트가 모든 프론트엔드 생태계를 통일할 것이라는 리액트 중심적인 생각은 위험하다. 모든 기술이 마찬가지지만 프론트엔드 생태계는 그 어떤 분야보다 빠르고 급진적으로 변화하고 있으며, 향후에는 무엇이 새롭게 등장할지 모른다. 리액트를 `사실상 표준`으로 여기는 순간, 새로운 변화를 받아들이고 유연하게 적응하기 어려워질 것이다.

### 오픈소스 생태계의 명과 암

**페이스북 라이센스 이슈**

오픈소스 라이센스 가운데 가장 널리 쓰이는 라이센스를 꼽는다면 바로 MIT 라이센스이다. MIT 라이센스는 흔히 볼 수 있는 오픈소스에 많이 쓰이고 있으며, 오픈소스 소프트웨어를 상업적으로 이용하거나, 배포하거나, 개인적으로 이용하는 등에 대한 어떠한 제약 없이 소프트웨어를 취급할 수 있는 매우 자유로운 라이센스 중 하나이다. 그러나 페이스북은 자사의 오픈소스인 React, Immutable, Jest 등에 이 MIT 라이센스 대신에 BSD+Parents 라이센스를 사용하고 있었다. 이 라이센스는 다른 라이센스와 다르게 `이 라이센스를 적용한 소프트웨어에 대해서 특정한 사건이 발생한다면 라이센스가 통지 없이 종료될 수 있다.`라는 한 가지 눈에 띄는 조항이 있었다.

2017년 7월, 격론 끝에 결국 페이스북은 해당 특허권을 삭제하고 MIT 라이센스로 넘어갔다. 아파치 재단과 워드프레스, 그리고 많은 개발자들의 관심 덕분에 이 페이스북 라이센스는 한바탕 소동으로 끝났지만 개발자들에게는 자신이 오픈소스로 만든 소프트웨어에 대한 권리를 한순간에 잃어버릴 수도 있다는 경각심을 갖게 하는 계기가 됐다.

**오픈소스는 무료로 계속 제공될 수 있는가? color.js, faker.js, 그리고 바벨**

바벨은 오픈소스로 이뤄져 있다. 바벨은 풀타임 개발자들을 고용해 급여를 주고 있지만 2021년 5월 재정난을 겪고 있다는 글이 올라왔으며, 연간 330,000달러가 필요하며, 이를 위한 모금을 계속하고 있다고 밝혔다.

그래도 바벨은 그나마 문제를 해결하려고 노력하는 편에 속한다. 그보다 급진적인 사례도 있다. color.js는 1.4.0에서 1.4.1로 패치 업데이트가 이뤄졌는데, 유의적 버전에 따라 패치 버전은 단순히 버그 수준에 그쳤어야 했지만 고의로 무한 루프를 삽입한 코드를 커밋해 1.4.1에 배포해 버렸다. 또 다른 사례로, faker.js의 경우 5.5.3 버전에서 갑자기 6.6.6으로 넘어갔는데, 이 6.6.6 버전에는 아무런 코드가 남아있지 않았다. 이렇게 자신의 코드에 악의적인 행위를 가한 이유에 대해서 `No more free work from Marak - Pat Me or Fork This` 라는 글을 남기며, 포춘 500대 기업을 대상으로 무료로 소프트웨어를 배포하는 일을 하지 않을 것이며, 6자리 수준의 연봉을 주거나 누군가 포크해서 대신 쓰라는 말을 남겼다.

이에 오픈소스를 당연히 무료로 쓰는 작금의 현상에 대해 비판을 하는 진영과, 그럼에도 이는 옳지 못한 일이며 오픈소스 생태계에 아무런 도움이 되지 않는다는 진영으로 나뉘어 지금까지도 열띤 토론이 이어지고 있다.

프론트엔드 분야는 거의 제로에 가까운 비용으로 애플리케이션을 만들고 배포해 사용할 수 있다. 우리는 700여 개의 라이브러리를 npm의 오픈소스 생태계 덕분에 돈 한푼 들이지 않고 모두 무료로 사용하고 있다. 프론트엔드 개발자들은 오픈소스 덕분에 손쉽게 개발하고 있음을 알고 있어야 하고, 반대로 오픈소스가 무슨 일을 하고 있는지를 알 필요도 있다. 이는 개발자의 호기심을 충족하는 일이 될 수도 잇지만, 지속 가능하고 오래 유지될 수 있는 안정적인 웹서비스를 만들기 위한 필수 요소이기도 하다.

### 제이쿼리, AngularJS, 리액트 그리고 다음은 무엇인가?

과거에는 서버와 웹페이지가 함께 있는 프레임워크가 주를 이뤘다면 현재로 오면서 점차 프론트엔드 단독 프레임워크가 증가하는 것을 볼 수 있다. 현재는 대부분의 웹사이트가 프론트엔드와 백엔드가 분리되어 개발되는 추세이다.

수많은 프레임워크가 등장하는 가운데 리액트는 그중 가장 많이 쓰이고 있는 도구 중 하나지만, 앞서 언급한 이유, 즉 상태 관리 라이브러리를 중심으로 한 다양한 옵션에 대한 피로감, 훅에 대한 거부감과 어려움 등으로 인해 점차 부정적인 의견이 조금씩 나타나고 있고, 이를 틈타 Svelte에 대한 관심이 떠오르고 있는 추세이다. 단시일 내에 리액트가 역사의 뒤안길로 사라진다고 주장하는 것은 아니지만 미래는 예측할 수 없으므로 개발자는 유연한 자세를 지녀야 한다. 우리는 리액트 개발자가 아니라 웹 개발자라고 자신을 소개할 수 있어야 한다.

### 웹 개발자로서 가져야 할 유연한 자세

무슨 프레임워크나 라이브러리를 사용하든 한 가지 변하지 않는 사실은 HTML과 CSS 자바스크립트가 웹페이지를 구성하는 기초 기술이라는 사실이다. 물론 웹어셈블리와 같이 웹을 구성하는 완전히 새로운 개념이 도입될 수도 있지만 브라우저가 과거 웹까지 안정적으로 보여주기 위해 많은 노력을 기울이고 있다는 점, 자바스크립트 또한 마찬가지로 호환성을 유지하기 위해 많은 노력을 기울인다는 점을 보면 당분간 이 HTML, CSS, 자바스크립트가 웹을 구성할 것이라는 사실에는 변함이 없을 것이다.

물론 그렇다고 이 생태계가 계속 이 수준에서 머물러 있을 것이라는 뜻은 아니다. 최근에는 느린 자바스크립트를 대신할 하나의 방안으로 웹어셈블리(WebAssembly)가 떠오르고 있다. 웹어셈블리는 C,C++,러스트 같은 시스템 프로그래밍 언어로 작성되어 있기 때문에 일반적으로 웹에서 자바스크립트를 기반으로 처리하기 어려운 작업을 웹어셈블리를 활용해 처리할 수 있다. 이로 인해 자바스크립트 개발자들 사이에서 러스트를 배우는 것이 유행처럼 떠오르고 있다. 그러나 웹어셈블리는 자바스크립트를 대신하는 것이 아닌, 자바스크립트와 함께 상호 보완적으로 실행되는 도구라고 보는 것이 적절하다(성능이 필요한 작업은 웹어셈블리로, 그 밖의 일반적인 작업은 자바스크립트로 하는 등).

이 밖에도 Next.js에서 살펴본 SWC, 터보팩 모두 러스트로 작성되어 자바스크립트로 실행되는 바벨과 웹팩을 속도 측면에서 개선하려는 시도도 이뤄지고 있다. 이와 비슷한 프로젝트로 ESLint보다 더 빠른, 러스트로 작성한 Rome도 주목받고 있다. 웹에서 작동하는 코드를 작성하기 위한 인프라는 자바스크립트에서 러스트로 넘어가고 있는 추세이지만 결국 웹에서 실행되는 코드는 자바스크립트라는 점에서는 변함이 없다.

변덕스러운 개발자 커뮤니티에서 리액트라는 라이브러리가 언제까지고 계속 시장을 지배하리라는 것은 아무도 보장할 수 없다. 리액트가 과거의 다른 프레임워크에 비해 조금 더 많은 인기와 전성기를 구가하고 있는 것은 사실이지만 그렇다고 웹 개발이 결국 모두 리액트로 통일되는 미래가 온다는 것은 아니다. 반대로 지금 당장 리액트를 그만두고 Svelte, Angular 등을 공부해야 한다는 것도 아니다. 중요한 것은 모든 웹 개발이 HTML, CSS, 자바스크립트라는 토대 위에 세워졌음을 깨닫는 것이다. 클로저의 개념과 원리, 활용은 리액트의 전유물이 아니며, 비동기 작업도 마찬가지로 처리하는 방법에 있어 약간의 차이가 있을 뿐, 마이크로 테스크를 활용해 브라우저에서 작업을 처리한다는 사실에는 변함이 없다. 라이브러리와 프레임워크는 그저 도구일 뿐, 자바스크립트가 토대라는 사실에는 변함이 없다.

리액트로 웹 애플리케이션을 작성하는데 막힘이 없고 자신감이 넘친다면 리액트 내부에서 어떻게 자바스크립트를 활용하는지 살펴보자. 리액트 코드 내부를 보는 것이 어렵다면 다시 자바스크립트부터 공부해 보는 것을 추천한다. 100만 개가 넘는 패키지가 존재하는 npm의 세계에는, 그리고 11억 개가 넘는 웹사이트가 존재하는 인터넷에는, 리액트로 되어 있는 것보다 리액트가 아닌 것으로 만들어진 것이 훨씬 더 많다. 이렇게 리액트를 넘어 다양한 자바스크립트 세계를 맛본다면 리액트에 의존적이지 않은 더욱 유연한 개발자가 될 수 있을 것이다.
