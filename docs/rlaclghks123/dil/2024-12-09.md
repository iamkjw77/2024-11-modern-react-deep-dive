# 2024.12.09 DIL

p655 ~

# 리액트 17과 18의 변경 사항 살펴보기

- 리액트를 사용하고 있는 사이트들은 일반적으로 16 버전을 사용중이다.
- 리액트로 만들어진 가장 유명한 웹사이트인 에어비앤비나 넷플릭스에서도 여전히 리액트 16 버전을 사용중이다.
- 그러나 이러한 사실이 17버전이나 18버전을 이해할 필요가 없음을 의미하지는 않는다.
- 리액트가 제공하는 최신 기능을 모두 활용하려면 리액트가 제공하는 새로운 버전을 조금씩 따라잡을 필요가 있다.
- 모든 라이브러리가 그렇듯, 최신 버전은 더 나은 기능, 더 가볍고 빠르게 제공하는 데 초점을 맞추고 있다.

# 리액트 17버전 살펴보기

- 16 버전과 다르게 새롭게 추가된 기능이 없으며 호환성이 깨지는 변경 사항을 최소화 했다
- 16버전 -> 17 버전으로의 버전 업은 큰 부담 없이 할 수 있는 작업

### 리액트의 점진적인 업그레이드

- 유의적버전, 즉 16에서 17로의 업데이트는 더 이상 호환되지 않는 API가 있거나, 새로운 리액트 17을 사용하는 데 있어 이전과 작동 방식이 달라질 수 있기 때문에 단행한 주 버전 업데이트
- 리액트 개발팀 입장에서는 편리하고 유용한 전략이지만, 오래된 코드 베이스를 기반으로 돌아가는 실제 웹 어플리케이션에는 그다지 좋지 못한 일이다.
  - 예를들어
  - 새로운 버전이 릴리스됨 -> 어떤 API가 수정됐는지 일일이 확인 후 적용
  - 지원 중단한 API는 어떻게 고쳐야 할지도 파악해야 함
- 즉 웹 서비스가 새로운 버전으로 완전히 넘어가버리거나, 계속 현재(과거 버전)에 머물로 있어야 한다. -> 중간은 없음

- 그러나 17버전부터는 점진적 업그레이드가 가능해짐
- 17 설치 후 18을 업데이트 하는 상황을 가정해보면
  - 18에서 제공하는 대부분의 기능을 사용할 수 있지만, 일부 기능에 대해서는 17에 머물러 있는게 가능해짐 -> 점진적 업그레이드가 가능해짐
  - 물론 서로 다른 리액트가 두 개각 존재해야 하는 것이므로 한 개가 있을때보다는 관리 지점이 많아짐
- 향후 업데이트가 부담 되더라도 17 버전부터 제공되는 점진적 업데이트를 위해서라도 17 버전 업데이트를 고려해 봄 직하다.
- 한꺼번에 업그레이드가 불가능한 상태에서만 차선책으로, 여전히 리액트에서는 한꺼번에 업데이트 하는 게 복잡성 감소 측면에서 좋다
- 새로운 버전으로 업그레이드 하기 부담스러운 상황이라면 꽤나 유용함 -> 점진적 업그레이드를 채택하기 위해서라도 반드시 17까지는 업데이트할 필요가 있다.

### 이벤트 위임 방식의 변경

- 리액트는 이벤트 핸들러를 이벤트 타입 하나 당 하나의 핸들러를 루트에 부착한다 -> 이벤트 위임
  - 캡처 : 이벤트 핸들러가 트리 최상단 요소에서 부터 시작해서 실제 이벤트가 발생한 타깃 요소까지 내려가는 것
  - 타깃 : 이벤트 핸들러가 타깃 노드에 도달하는 단계 -> 이 단계에서 이벤트가 호출
  - 버블링 : 이벤트가 발생한 요소에서부터 시작해 최상위 요소까지 다시 올라간다.
- 이벤트위임이 리액트 16 버전까지는 모두 document에서 수행된다.
- 리액트 17부터는 이벤트 위임이 모두 document가 아닌 리액트 컴포넌트 최상단 트리, 즉 루트요소로 바뀜
  - why? -> 점진적 업그레이드 지원, 다른 바닐라 자바스크립트 코드 또는 JQuery 등 혼재돼 있는 경우 혼란을 방지하기 위함
  - 모든 이벤트가 document에 달려 있다면 의도치 않은 동작이 발생할 수 있음
  - 즉 서로 다른 리액트 버전에서 발생할 수 있는 문제를 해결하기 위해 이벤트 위임 대상을 document에서 컴포넌트의 최상위로 변경
    - -> 각 이벤트는 해당 리액트 컴포넌트 트리 수준으로 격리되므로 이벤트 버블링으로 인한 혼선을 방지할 수 있다.
    - 이런 문제가 리액트끼리만 발생하는 것은 아니며, 한 애플리케이션에서 jQuery 같은 다른 라이브러리와 리액트 16 등 혼재되어 있는 상황에서도 동일한 문제가 발생할 수 ㅣㅇㅆ다.
